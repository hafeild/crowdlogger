<html>
<head>
    <title>This is just a test</title>
    <script src="../js/utils.js"></script>
    <script>
        var clean_string;

        function clean(){
            var form = document.forms.data;
            form.output.value = clean_string( form.input.value );
        }

        clean_string = function( data ){
            var output_string = data;
        
            // Is it an https url? Is it a Google encrypted search url?
            if( output_string.match(/^https:\/\//) &&
                   !output_string.match( /^https:\/\/encrypted.google.com/ ) ) {
                // Yes. Now remove all the parameters.
                output_string = output_string.replace( /\?.*$/, "" );
            }
        
            // Remove anything that looks like a SSN.
            output_string = output_string.replace( 
                    /(^|\D)\d\d\d\D{0,1}\d\d\D{0,1}\d\d\d\d(\D|$)/g, function( a ) {
                return a.replace( /\d/g, "#" );
            } );
        
            // Remove anything that looks like a phone number.
            output_string = output_string.replace( /(((%28)|\(){0,1}\d\d\d((%29)|\)){0,1}){0,1}\D{0,2}\d\d\d\D{0,2}\d\d\d\d/g,
               function( a ) {
                var replace = a.replace( /%28/, "____BEGIN_PAREN" );
                replace = replace.replace( /%29/, "____END_PAREN" );
                replace = replace.replace( /\d/g, "#" );
                replace = replace.replace( /____BEGIN_PAREN/, "%28" );
                replace = replace.replace( /____END_PAREN/, "%29" );
                return replace;
            } );
        
            return output_string;
        
        };
        

    </script>
</head>
<body>
<h1>Test</h1>

<form name="data">
    Input: <input type="text" name="input"/><br><br>
    <a href="#" onclick="clean(); return false;">Clean</a>
    <p>
    Output: <input type="text" name="output"/><br>
</form>


</body>
</html>
