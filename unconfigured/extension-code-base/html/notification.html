<html>
<head>
    <link href="../css/alert.css" rel="stylesheet" type="text/css">
    <script>
        
        var CROWDLOGGER = chrome.extension.getBackgroundPage().CROWDLOGGER;
   
        // Read in the GET arguments. 
        function gup( name ) {
          name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
          var regexS = "[\\?&]"+name+"=([^&#]*)";
          var regex = new RegExp( regexS );
          var results = regex.exec( window.location.href );
          if( results == null ){
            return "";
          } else {
            return unescape(results[1]);
          }
        }


        // Fil the notification.
        var init = function(){
            var title = document.getElementById( "alertTitleLabel" );
            var text  = document.getElementById( "alertTextLabel" );
            var onclick = gup( "onclick" );
    
            if( title ){
                title.innerHTML = gup( "title" );
            }
       
            
            if( text ){
                text.innerHTML = gup( "text" );
                if( onclick !== "" ){      
                    text.setAttribute( "onclick", onclick );
                    text.setAttribute( "clickable", true );
                    var classes = text.getAttribute( "class" );
                    text.setAttribute( "class", classes += " clickable" );
                }
            }
            
        };

        window.addEventListener( "load", function(){init();}, false ); 
    </script>
</head>
<body>
<table>
    <tr>
        <td>
            <img src="../css/img/notification.png" style="padding:20px;"/>
        </td>
        <td>
            <span class="alertTitle" id="alertTitleLabel"></span>
            <p></p>
            <span class="alertText" id="alertTextLabel"></span>
        </td>
    </tr>
</table>
</body>
</html>
